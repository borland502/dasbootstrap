---
# yaml-language-server: $schema=https://taskfile.dev/schema.json

version: "3"

tasks:
  default:
    desc: Run all linters
    cmds:
      - task: ansible
      - task: markdown
      - task: ruff

  ansible:
    silent: true
    desc: lint ansible directory files
    cmds:
      - ansible-lint --fix -c .github/linters/.ansible.yaml

  markdown:
    desc: Lint Markdown
    cmds:
      - markdownlint-cli2 --fix -c '.github/linters/.markdownlint.yaml' *.md **/*.md !.venv/**/*.md
    ignore_error : true

  ruff:
    silent: true
    desc: Run ruff
    cmds:
      - "{{.RUN_PREFIX}} ruff format {{.PYTHON_SRC}} --fix --config {{.DASBOOTSTRAP_HOME}}/pyproject.toml --line-length 128 --target-version py312"
    ignore_error : true
